let arrendatarios=[],$body=document.querySelector("#bodyTableArrendatarios"),btnSaveArrendatario=document.getElementById("btnSaveArrendatario"),btnUpdateArrendatario=document.getElementById("btnUpdateArrendatario"),formArrendatarioRegister=document.getElementById("formArrendatarioRegister");formArrendatarioRegister.addEventListener("submit",ajaxFormRegisterArrendatarios);let formArrendatarioUpdate=document.getElementById("formArrendatarioUpdate");formArrendatarioUpdate.addEventListener("submit",ajaxFormUpdateArrendatario);const info=()=>{if(0==arrendatarios.length){const a=document.createElement("tr");let b=document.createElement("td");b.setAttribute("colspan",7),b.setAttribute("id","infoTable"),b.textContent="Sin datos",a.appendChild(b),$body.appendChild(a)}},getData=async()=>{try{const a=await axios.get(`${SITEURL}/arrendatarios`);arrendatarios=Object.values((await a).data),0<arrendatarios.length&&(await drawTable(arrendatarios,$body,"Arrendatario"),null!=document.getElementById("infoTable")&&document.getElementById("infoTable").remove())}catch(a){console.error(a)}};async function ajaxFormRegisterArrendatarios(a){a.preventDefault(),btnSaveArrendatario.value="Enviando...",btnSaveArrendatario.disabled=!0;const b=new FormData(formArrendatarioRegister),c=await axios.post(formArrendatarioRegister.action,b).then(a=>{refresh(a.data.message),$("#formArrendatarioRegister").trigger("reset"),$("#modalArrendatarioRegister").modal("hide")}).catch(a=>{if(a.response.data.errors){for(var b in a.response.data.errors){let c=formArrendatarioRegister.elements.namedItem(b);c.classList.add("is-invalid"),toastr.error(`<li> ${a.response.data.errors[b]} </li>`)}console.error(a.response.data)}});document.getElementById("btnSaveArrendatario").value="Enviar",btnSaveArrendatario.disabled=!1}async function ajaxFormUpdateArrendatario(a){a.preventDefault(),btnUpdateArrendatario.value="Enviando...",btnUpdateArrendatario.disabled=!0;const b=new FormData(formArrendatarioUpdate),c=await axios.post(formArrendatarioUpdate.action,b).then(a=>{refresh(a.data.message),$("#formArrendatarioUpdate").trigger("reset"),$("#modalArrendatarioUpdate").modal("hide")}).catch(a=>{for(var b in a.response.data.errors){let c=formArrendatarioUpdate.elements.namedItem(b);c.classList.add("is-invalid"),warning=document.createTextNode(`${a.response.data.errors[b]}`),insertAfter(warning,c)}});document.getElementById("btnUpdateArrendatario").value="Enviar",btnUpdateArrendatario.disabled=!1}function eliminarArrendatario(a){toastr.options.preventDuplicates=!0,toastr.info("<br /><button class='btn btn-sm btn-danger m-1' type='button' value='yes'>Yes</button> <button class='btn btn-sm btn-warning m-1' type ='button'  value='no' > No </button>","Desea eliminar este elemento ?",{allowHtml:!0,onclick:async function(b){if(value=b.target.value,"yes"==value){const b=`${SITEURL}/arrendatarios/${a}`;try{const a=await axios.delete(b);refresh(a.data.data)}catch(a){toastr.remove(),console.error(a)}}else toastr.remove()}})}async function editarArrendatario(a){const b=SITEURL+"/arrendatarios/"+a,c=await axios.get(b);switch(c.status){case 200:formArrendatarioUpdate.id.value=c.data.data.id,formArrendatarioUpdate.nombre.value=c.data.data.nombre,formArrendatarioUpdate.apellido.value=c.data.data.apellido,formArrendatarioUpdate.email.value=c.data.data.email,formArrendatarioUpdate.tipo_identificacion.value=c.data.data.tipo_identificacion,formArrendatarioUpdate.identificacion.value=c.data.data.identificacion,formArrendatarioUpdate.direccion.value=c.data.data.direccion,formArrendatarioUpdate.ciudad.value=c.data.data.ciudad,formArrendatarioUpdate.departamento.value=c.data.data.departamento,formArrendatarioUpdate.barrio.value=c.data.data.barrio,formArrendatarioUpdate.telefono.value=c.data.data.telefono,formArrendatarioUpdate.opcional_telefono.value=c.data.data.opcional_telefono,$("#modalArrendatarioUpdate").modal("show");break;default:}}const refresh=async a=>{$body.innerHTML="",getData(),await toastr.remove(),await toastr.info("Success:",a)};document.hasFocus()&&(info(),getData());